(this.webpackJsonpcomments_SPA_frontend=this.webpackJsonpcomments_SPA_frontend||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(7),l=n.n(c),i=(n(13),n(14),n(3)),r=n.n(i),o=n(5),m=n(2),j=n(4),u=n.n(j),b="https://comments-spa.netlify.app/.netlify/functions/server";function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};return n&&(a.body=new URLSearchParams(n).toString(),a.headers={"Content-Type":"application/x-www-form-urlencoded","Access-Control-Allow-Origin":"*"}),fetch(b+e,a).then((function(e){if(!e.ok)throw new Error;return e.json().then((function(e){return e.results}))}))}var h,f=function(e){return d(e)},O=function(e,t){return d(e,"POST",t)},p=n(8);!function(e){e.Username="Username can't be empty",e.Email="Email can't be empty",e.CommentText="You need to add your comment",e.Add="Unable to add a comment",e.None="",e.NoComments="Comments load failed"}(h||(h={}));var x=n(0);var N=function(e){var t=e.onLoad,n=e.onComment,s=e.replyTo,c=Object(a.useState)(""),l=Object(m.a)(c,2),i=l[0],j=l[1],u=Object(a.useState)(""),b=Object(m.a)(u,2),d=b[0],f=b[1],N=Object(a.useState)(""),v=Object(m.a)(N,2),g=v[0],w=v[1],y=Object(a.useState)(""),C=Object(m.a)(y,2),S=C[0],_=C[1],A=Object(a.useState)(!1),k=Object(m.a)(A,2),T=k[0],P=k[1],E=Object(a.useState)(""),F=Object(m.a)(E,2),L=F[0],D=F[1],U=Object(a.useState)(!1),R=Object(m.a)(U,2),K=R[0],M=R[1],I=Object(a.useState)(),Z=Object(m.a)(I,2),q=Z[0],z=Z[1],B=Object(a.useState)(),G=Object(m.a)(B,2),H=G[0],J=G[1],$=Object(a.useRef)(null),Q=function(){var e;null===(e=$.current)||void 0===e||e.getResponse().then((function(e){D(e)})),L||P(!1),P(!0)};Object(a.useEffect)((function(){return function(){return Q()}}));var Y=function(){var e=Object(o.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),/^((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www\.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)$/.test(i)&&M(!0),e.prev=2,e.next=5,c={username:d.trim(),email:g.trim(),homepage:S.trim(),messageText:i.trim(),responseTo:s},O("/messages",c);case 5:return e.next=7,t();case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),new Error(h.Add);case 12:return e.prev=12,f(""),w(""),_(""),j(""),n(!1),e.finish(12);case 16:P(!1);case 17:case"end":return e.stop()}var c}),e,null,[[2,9,12,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"comment comment__container",title:"commentForm",children:Object(x.jsx)("a",{id:"comment-form",children:Object(x.jsxs)("form",{onSubmit:Y,className:"box comment__form",children:[Object(x.jsxs)("div",{className:"form__title",children:[Object(x.jsx)("h2",{className:"subtitle is-3",children:"Add a new comment"}),Object(x.jsx)("button",{"aria-label":"Save",onClick:function(){return n(!1)},type:"button",className:"delete is-danger button__close"})]}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("label",{htmlFor:"username",className:"label",children:["Username:",Object(x.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(x.jsx)("input",{name:"username",required:!0,type:"text",className:"input input-username",placeholder:"User name goes here",value:d,onChange:function(e){return f(e.target.value)}}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-user"})})]})]})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("label",{htmlFor:"email",className:"label",children:["Email:",Object(x.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(x.jsx)("input",{name:"email",required:!0,type:"email",className:"input input-email",placeholder:"example@example.com",value:g,onChange:function(e){return w(e.target.value)}}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-envelope"})})]})]})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("label",{htmlFor:"homepage",className:"label",children:["Homepage:",Object(x.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(x.jsx)("input",{name:"homepage",type:"url",className:"input input-homepage",placeholder:"https://example.com",value:S,onChange:function(e){return _(e.target.value)}}),Object(x.jsx)("span",{className:"icon is-small is-left",children:Object(x.jsx)("i",{className:"fas fa-solid fa-globe"})})]})]})}),Object(x.jsxs)("div",{className:"field",children:[Object(x.jsxs)("label",{htmlFor:"comment",className:"label",children:["New comment:",Object(x.jsx)("div",{className:"control",children:Object(x.jsx)("textarea",{name:"comment",className:"input input-comment",placeholder:"Your comment goes here",value:i,onChange:function(e){return j(e.target.value)}})})]}),K&&Object(x.jsx)("p",{className:"help is-danger",children:"This text is not valid. Check it for valid HTML code!"})]}),Object(x.jsx)("div",{className:"file is-info has-name",children:Object(x.jsxs)("label",{htmlFor:"file-image",className:"file-label",children:[Object(x.jsx)("input",{className:"file-input",type:"file",name:"file",accept:".png, .gif, .jpg, .jpeg",onChange:function(e){e.target.files&&z(e.target.files[0])}}),Object(x.jsxs)("span",{className:"file-cta",children:[Object(x.jsx)("span",{className:"file-icon",children:Object(x.jsx)("i",{className:"fas fa-cloud-upload-alt"})}),Object(x.jsx)("span",{className:"file-label",children:"Attach image here"})]}),Object(x.jsx)("span",{className:"file-name",children:q})]})}),Object(x.jsx)("div",{className:"file is-warning has-name",children:Object(x.jsxs)("label",{htmlFor:"file-text",className:"file-label",children:[Object(x.jsx)("input",{className:"file-input",type:"file",name:"file",accept:".txt",onChange:function(e){e.target.files&&J(e.target.files[0])}}),Object(x.jsxs)("span",{className:"file-cta",children:[Object(x.jsx)("span",{className:"file-icon",children:Object(x.jsx)("i",{className:"fas fa-cloud-upload-alt"})}),Object(x.jsx)("span",{className:"file-label",children:"Attach text here"})]}),Object(x.jsx)("span",{className:"file-name",children:H})]})}),Object(x.jsxs)("div",{className:"button__container",children:[Object(x.jsx)(p.a,{sitekey:"6Lf9IEAkAAAAAHEUJ1qBQQp2G8FZerPoBP3iuLcm",onVerify:Q}),Object(x.jsx)("button",{type:"submit",className:"button is-success is-outlined button__send",disabled:!d||!g||!i||!T,children:"Send"})]})]})})})},v=function(e){var t=e.reply,n=e.onReply,a=e.onComment,s=t.username,c=t.email,l=t.messageText,i=t.createdAt,r=i.slice(0,10),o=i.slice(11,19),m=function(){a(!0),n(t.id.toString())};return Object(x.jsx)("div",{className:"box has-background-warning reply-comment__container",title:"comment",children:Object(x.jsxs)("div",{className:"media-content",children:[Object(x.jsx)("div",{className:"content",children:Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:s}),"\xa0",Object(x.jsx)("small",{children:c}),"\xa0",Object(x.jsxs)("small",{children:[r,"\xa0",o]}),Object(x.jsx)("br",{}),l]})}),Object(x.jsx)("nav",{className:"level is-mobile",children:Object(x.jsx)("div",{className:"level-left",children:Object(x.jsx)("a",{href:"#comment-form",className:"level-item","aria-label":"reply",onClick:m,onKeyDown:m,children:Object(x.jsx)("span",{className:"icon is-small",children:Object(x.jsx)("i",{className:"fas fa-reply","aria-hidden":"true"})})})})})]})})},g=function(e){var t=e.comments,n=e.comment,a=e.onReply,s=e.onComment,c=n.username,l=n.email,i=n.messageText,r=n.createdAt,o=r.slice(0,10),m=r.slice(11,19),j=t.filter((function(e){return n.id===Number(e.responseTo)}))||null,u=function(){s(!0),a(n.id.toString())};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"box",title:"comment",children:Object(x.jsxs)("div",{className:"media-content",children:[Object(x.jsx)("div",{className:"content",children:Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:c}),"\xa0",Object(x.jsx)("small",{children:l}),"\xa0",Object(x.jsxs)("small",{children:[o,"\xa0",m]}),Object(x.jsx)("br",{}),i]})}),Object(x.jsx)("nav",{className:"level is-mobile",children:Object(x.jsx)("div",{className:"level-left",children:Object(x.jsx)("a",{href:"#comment-form",className:"level-item","aria-label":"reply",onClick:u,onKeyDown:u,children:Object(x.jsx)("span",{className:"icon is-small",children:Object(x.jsx)("i",{className:"fas fa-reply","aria-hidden":"true"})})})})})]})}),j.map((function(e){return Object(x.jsx)(v,{reply:e,onReply:u,onComment:s},e.id)}))]})};var w=function(e){var t=e.numberOfComments,n=e.currentPage,s=e.perPage,c=e.onPageChange,l=Math.ceil(t/s),i=function(e,t){for(var n=[],a=e;a<=t;a+=1)n.push(a);return n}(1,l),r=Object(a.useMemo)((function(){return 1===n}),[n]),o=Object(a.useMemo)((function(){return n===l}),[n,l]),m=function(e,t){e.preventDefault(),c(t),window.scrollTo({top:0})},j=function(e,t){e.preventDefault(),c(t),window.scrollTo({top:0})};return Object(x.jsxs)("nav",{className:"pagination is-centered",role:"navigation","aria-label":"pagination",children:[Object(x.jsx)("a",{role:"button",tabIndex:0,className:u()("pagination-previous",{"is-disabled":r}),title:"This is the first page",onClick:function(e){return m(e,n-1)},onKeyDown:function(e){return j(e,n-1)},children:"Previous"}),Object(x.jsx)("a",{role:"button",tabIndex:0,className:u()("pagination-next",{"is-disabled":o}),onClick:function(e){return m(e,n+1)},onKeyDown:function(e){return j(e,n+1)},children:"Next page"}),Object(x.jsx)("ul",{className:"pagination-list",children:Object(x.jsx)("li",{children:i.map((function(e){return Object(x.jsx)("a",{href:"/",className:u()("pagination-link",{"is-current":n===e}),"aria-label":"Goto page ".concat(e),"aria-current":"page",onClick:function(t){return m(t,e)},onKeyDown:function(t){return j(t,e)},children:e},e)}))})})]})},y=function(){var e=Object(a.useState)(0),t=Object(m.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(1),l=Object(m.a)(c,2),i=l[0],j=l[1],b=Object(a.useState)([]),d=Object(m.a)(b,2),O=d[0],p=d[1],v=Object(a.useState)([]),y=Object(m.a)(v,2),C=y[0],S=y[1],_=Object(a.useState)(!1),A=Object(m.a)(_,2),k=A[0],T=A[1],P=Object(a.useState)(""),E=Object(m.a)(P,2),F=E[0],L=E[1],D=Object(a.useCallback)(Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("/messages");case 3:return t=e.sent,e.next=6,a=25,f("/messages?page=".concat(i,"&limit=").concat(a));case 6:n=e.sent,p(n),s(t.length),S(t),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error(h.NoComments);case 15:case"end":return e.stop()}var a}),e,null,[[0,12]])}))),[i]);Object(a.useEffect)((function(){D()}),[i]);var U=O.filter((function(e){return!Object.prototype.hasOwnProperty.call(e,"responseTo")||"NULL"===e.responseTo}));return Object(x.jsxs)("div",{className:"comments-list__container",children:[Object(x.jsx)("h1",{children:"Comments List"}),Object(x.jsxs)("table",{className:"table is-fullwidth",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:Object(x.jsx)("th",{children:Object(x.jsx)("span",{className:"is-flex is-flex-wrap-nowrap",children:Object(x.jsx)("a",{href:"#/",children:Object(x.jsx)("span",{className:"icon",children:Object(x.jsx)("i",{className:"fas fa-sort fa-sort-down"})})})})})})}),Object(x.jsx)("tbody",{children:U.map((function(e){return Object(x.jsx)("tr",{children:Object(x.jsx)("td",{children:Object(x.jsx)(g,{comment:e,comments:C,onReply:L,onComment:T})})},e.id)}))})]}),Object(x.jsx)("a",{href:"#comment-form",children:Object(x.jsx)("button",{type:"button",className:u()("button is-primary is-outlined",{"is-hidden":k}),onClick:function(){return T(!0)},children:"Add a new comment"})}),Object(x.jsx)(w,{numberOfComments:n,currentPage:i,perPage:25,onPageChange:function(e){j(e)}}),k&&Object(x.jsx)(N,{onLoad:D,onComment:T,replyTo:F})]})},C=function(){return Object(x.jsx)("main",{className:"main",children:Object(x.jsx)("div",{className:"main__container",children:Object(x.jsx)(y,{})})})};l.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(C,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.9aee4628.chunk.js.map